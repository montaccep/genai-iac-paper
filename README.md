This repository contains a collection of Ansible playbooks, Jinja2 templates, and other configuration files generated by a large language model (LLM). These scripts are designed to setup and manage a big data architecture using Infrastructure as Code (IaC).

## Introduction

IaC allows data architects to provision and manage different clusters. The scripts in this repository are designed to setup and configure the following clusters in an on-premises environment:

- Spark cluster
- Kafka cluster
- Redis cluster

## Directory Structure

This repository is structured as follow:

- `inventories/`: Ansible inventory files.
- `playbooks/`: Ansible playbooks for cluster setup.
- `roles/`: Ansible roles for common tasks and cluster-specific configurations.
- `templates/`: Jinja2 templates for cluster configuration files.

## Requirements

Make sure you have have the following requirement before you start:

- Ansible 2.15 is installed on your control node.
- Target machines running Ubuntu server.
- Access to target machines via SSH.
- Internet access for downloading dependencies.

## Getting Started

1. Clone the repository to your Ansible control node.

	``` bash
	git clone https://github.com/montaccep/genai-iac-paper.git
	```

2. Update the Ansible inventory file (`inventories/hosts`).

3. If necessary, customize configuration variables in Ansible playbooks and Jinja2 templates.

## Usage

To deploy the clusters, follow these steps:

1. Run the Ansible playbooks for each cluster:

	```bash
	ansible-playbook playbooks/spark/main.yml -i inventories/hosts
	ansible-playbook playbooks/kafka/main.yml -i inventories/hosts
	ansible-playbook playbooks/redis/main.yml -i inventories/hosts
	```
2. Monitor the Ansible output for any errors or warnings.

3. Verify each cluster status and access the services on the target machines.

## Corresponding Prompt:

The following prompt was used to generate the IaC scripts.

```
You are an IaC expert who can teach a junior data engineer how to write IaC code. Your tool of choice is Ansible. Do not explain the code, just generate ALL the code blocks.

Objective: Create Ansible playbooks for setting up and configuring Redis, Kafka, and Spark clusters.

Cluster Details:

Redis Cluster:
Desired Number of Nodes: 3
Redis Version: 7.2
Replication: 1
Port Configuration: 6379
Authentication: none

Kafka Cluster:
Desired Number of Brokers: 3
Kafka Version: 3.5.1
Zookeeper Connection: zk1:2181,zk2:2181,zk3:2181
Security Configuration: SSL/TLS is not required

Spark Cluster:
Desired Number of Spark Nodes: 5
Spark Version: 3.2.4
Cluster Manager: Stand-alone
Spark Job Dependencies: none

Requirements:
Include error handling and logging mechanisms.
The playbooks should be organized logically and follow best practices.

Deliverables:
Directory Structure.
Ansible inventory file.
Ansible playbooks for setting up the Redis cluster.
Ansible playbooks for downloading and configuring the Kafka cluster.
Ansible playbooks for downloading and configuring the Spark cluster.
Jinja2 templates for configuring the Redis cluster, Kafka cluster, and Spark cluster.

Additional Information:
Ensure that the playbooks are well-documented with comments for better understanding.
Any necessary variables or configuration files should be properly managed.

Environment Details:
Operating System: Ubuntu server
Ansible Version: 2.15

Please generate Ansible playbooks that will meet the above requirements and configurations for deploying the Redis, Kafka, and Spark clusters on an On-Premises environment. Each playbook should be self-contained and well-structured.
```